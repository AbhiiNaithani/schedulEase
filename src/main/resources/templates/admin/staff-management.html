<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Staff Management - schedulEase</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
	<link th:href="@{/css/style.css}" rel="stylesheet">
</head>

<body>
	<div th:replace="~{fragments/header :: header}"></div>
	<div th:replace="~{fragments/navbar-admin :: navbar}"></div>

	<main class="container mt-4">
		<!-- Page Header -->
		<div class="row mb-4">
			<div class="col-md-12">
				<h2><i class="bi bi-person-badge"></i> Staff Management</h2>
				<p class="text-muted">Manage staff accounts and permissions</p>
			</div>
		</div>

		<!-- Flash Messages -->
		<div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show">
			<i class="bi bi-check-circle"></i> <span th:text="${successMessage}"></span>
			<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
		</div>
		<div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show">
			<i class="bi bi-exclamation-triangle"></i> <span th:text="${errorMessage}"></span>
			<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
		</div>

		<!-- Add Staff Button -->
		<div class="row mb-3">
			<div class="col-md-12">
				<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addStaffModal">
					<i class="bi bi-person-plus"></i> Add New Staff
				</button>
			</div>
		</div>

		<!-- Staff List -->
		<div class="card">
			<div class="card-header bg-success text-white">
				<h5 class="mb-0"><i class="bi bi-table"></i> Staff Members
					<span class="badge bg-light text-dark" th:text="${#lists.size(staffList)}">0</span>
				</h5>
			</div>
			<div class="card-body">
				<div class="table-responsive">
					<table class="table table-striped table-hover">
						<thead>
							<tr>
								<th>ID</th>
								<th>Full Name</th>
								<th>Email</th>
								<th>Phone</th>
								<th>Department</th>
								<th>Status</th>
								<th>Created At</th>
							</tr>
						</thead>
						<tbody>
							<tr th:if="${#lists.isEmpty(staffList)}">
								<td colspan="7" class="text-center text-muted">No staff members found</td>
							</tr>
							<tr th:each="staff : ${staffList}">
								<td th:text="${staff.id}">1</td>
								<td th:text="${staff.userAccount.fullName}">Staff Name</td>
								<td th:text="${staff.userAccount.email}">staff@example.com</td>
								<td th:text="${staff.userAccount.phone}">1234567890</td>
								<td th:text="${staff.department}">Department</td>
								<td>
									<span th:if="${staff.userAccount.status.name() == 'ACTIVE'}"
										class="badge bg-success">Active</span>
									<span th:if="${staff.userAccount.status.name() != 'ACTIVE'}"
										class="badge bg-danger">Inactive</span>
								</td>
								<td th:text="${#temporals.format(staff.createdAt, 'yyyy-MM-dd')}">2024-01-01</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</main>

	<!-- Add Staff Modal -->
	<div class="modal fade" id="addStaffModal" tabindex="-1">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header bg-primary text-white">
					<h5 class="modal-title"><i class="bi bi-person-plus"></i> Create Staff Account</h5>
					<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
				</div>
				<form th:action="@{/admin/staff/create}" method="post">
					<div class="modal-body">
						<div class="mb-3">
							<label for="email" class="form-label">Email Address *</label>
							<input type="email" class="form-control" id="email" name="email" required>
						</div>
						<div class="mb-3">
							<label for="fullName" class="form-label">Full Name *</label>
							<input type="text" class="form-control" id="fullName" name="fullName" required>
						</div>
						<div class="mb-3">
							<label for="phone" class="form-label">Phone Number *</label>
							<input type="tel" class="form-control" id="phone" name="phone" required>
						</div>
						<div class="mb-3">
							<label for="department" class="form-label">Department *</label>
							<input type="text" class="form-control" id="department" name="department" required>
						</div>
						<div class="mb-3">
							<label for="dob" class="form-label">Date of Birth *</label>
							<input type="date" class="form-control" id="dob" name="dob" required>
						</div>
						<div class="mb-3">
							<label for="password" class="form-label">Password *</label>
							<input type="password" class="form-control" id="password" name="password" minlength="8"
								required>
							<small class="text-muted">Minimum 8 characters</small>
						</div>
						<div class="mb-3">
							<label for="confirmPassword" class="form-label">Confirm Password *</label>
							<input type="password" class="form-control" id="confirmPassword" name="confirmPassword"
								minlength="8" required>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
						<button type="submit" class="btn btn-primary">
							<i class="bi bi-save"></i> Create Staff Account
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>

	<div th:replace="~{fragments/footer :: footer}"></div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<script th:src="@{/js/main.js}"></script>
</body>

</html>